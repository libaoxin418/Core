<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="scripts/jquery.js"></script>
</head>
<body>
    <script type="text/javascript">
        var workflowinfo = {
            "WorkflowId": "D2DED37E-E6EC-43A0-91F5-13547F8BFDBE",
            "ItemId": "358E7896-BB76-4E6D-AD4C-BB67E4008DC4",
            "ListId": "A398134C-DA4F-4F23-AD82-A8A2F375C1E8",
            "WorkflowName": "一级审批工作流",
            "Author": "zhangsan",
            "Created": "2017-08-17",
            "CurrentNode": 0,
            "DataSource": { "{DB.Get.Item.Author}": "SqlConnection", "{API.Get.Item.Author}": "http://api", "{DB.Get.Item.Id}": "SqlConnection" },
            "Nodes": [
                {
                    "Index": 0,
                    "Id": "CC5FF444-EBD2-45DE-9463-9823B86FC455",
                    "Name": "经理审批",
                    "TaskName": "{DB.Get.Item.Author}的请加审批{API.Get.Item.Created}",
                    "TaskUrl": "/demo/item.html?itemid={DB.Get.Item.Id}",
                    "IsSendEmail": true,
                    "EmailTmpl": "",
                    "Expire": { "Minutes": 720, "NodeId": "" },
                    "Countersign": {
                        "Enable": false,
                        "NextNodes": [
                            { "Rate": "", "NodeId": "" },
                            { "Rate": "", "NodeId": "" }
                        ]
                    },
                    "Form": { "Item": true, "Task": true, "History": true },
                    "Approvers": {
                        "Person": ["lisi"],
                        "Group": [],
                        "Default": []
                    },
                    "Buttons": [
                        {
                            "Index": 0,
                            "Id": "Reject",
                            "Name": "拒绝",
                            "PreNode": -1,
                            "NextNode": -1
                        },
                        {
                            "Index": 1,
                            "Id": "Approval",
                            "Name": "通过",
                            "PreNode": -1,
                            "NextNode": -1
                        }
                    ],
                    "Switch": [
                        {
                            "Case": "",
                            "NextNode": -1
                        }
                    ],
                    "ControlPermissionLevel": 1,
                }
            ],
            "WorkflowVariable": {}
        };

        jQuery.support.cors = true;
        $.ajax({
            type: "Post",
            datatype: "json",
            data: { "wfConfig": JSON.stringify(workflowinfo) },
            url: "http://localhost:49388/api/workflow/wfDesigner/add",
            success: function () { }
        });
    </script>
</body>
</html>